#!/bin/bash

function substitute() {
	local binpath=/bin/$1
	[ -x $binpath ] && [ ! -h $binpath ] && {
		read dummy version < <($binpath --version | egrep -o 'version \d+\.\d+')
		echo "Moving $binpath to $binpath-$version"
		sudo mv $binpath $binpath-$version
		newbinpath=$(which $1)
		echo "Linking $binpath to $newbinpath"
		sudo ln -s $newbinpath $newbinpath
	}
}

brew install bash
brew install bash-completion

sudo -v

ln -s /usr/local/bin/bash /usr/local/bin/sh

substitute bash
substitute sh
