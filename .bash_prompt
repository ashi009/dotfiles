# @gf3’s Sexy Bash Prompt, inspired by “Extravagant Zsh Prompt”
# Shamelessly copied from https://github.com/gf3/dotfiles
# Screenshot: http://i.imgur.com/s0Blh.png

# if [[ $COLORTERM = gnome-* && $TERM = xterm ]] && infocmp gnome-256color >/dev/null 2>&1; then
# 	export TERM=gnome-256color
# elif infocmp xterm-256color >/dev/null 2>&1; then
# 	export TERM=xterm-256color
# fi

function parse_version_control() {
	local modified
	local dummy
	local branch
	if [ -e .git ]; then
		read dummy branch < <(git branch --no-color 2> /dev/null)
		[ $(git status -s -uno | wc -l) -gt 0 ] && modified=' \E[1;37m*\E[0m'
		echo -ne " \E[33m$branch$modified"
	elif [ -e .svn ]; then
		[ $(svn st -q | wc -l) -gt 0 ] && modified=' \E[1;37m*\E[0m'
		echo -ne " \E[35msvn$modified"
	fi
}

export PS1="\[\033[37m\]\u@\h \[\033[01;34m\]\w\[\033[0m\]\$(parse_version_control)\[\033[0m\]\n\[\033[0m\]\$\[\033[0m\] "
export PS2="\[\033[0m\]→\[\033[0m\] "
export PS4="\${0}:\${LINENO} "